{"dependencies":[{"name":"./timeoutManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0},"end":{"line":2,"column":59}}],"key":"pyQHMhdGxfRLqgunhFS/8/ELubI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createNotifyManager\", {\n    enumerable: true,\n    get: function () {\n      return createNotifyManager;\n    }\n  });\n  Object.defineProperty(exports, \"defaultScheduler\", {\n    enumerable: true,\n    get: function () {\n      return defaultScheduler;\n    }\n  });\n  Object.defineProperty(exports, \"notifyManager\", {\n    enumerable: true,\n    get: function () {\n      return notifyManager;\n    }\n  });\n  var _timeoutManagerJs = require(_dependencyMap[0], \"./timeoutManager.js\");\n  var defaultScheduler = _timeoutManagerJs.systemSetTimeoutZero;\n  function createNotifyManager() {\n    var queue = [];\n    var transactions = 0;\n    var notifyFn = callback => {\n      callback();\n    };\n    var batchNotifyFn = callback => {\n      callback();\n    };\n    var scheduleFn = defaultScheduler;\n    var schedule = callback => {\n      if (transactions) {\n        queue.push(callback);\n      } else {\n        scheduleFn(() => {\n          notifyFn(callback);\n        });\n      }\n    };\n    var flush = () => {\n      var originalQueue = queue;\n      queue = [];\n      if (originalQueue.length) {\n        scheduleFn(() => {\n          batchNotifyFn(() => {\n            originalQueue.forEach(callback => {\n              notifyFn(callback);\n            });\n          });\n        });\n      }\n    };\n    return {\n      batch: callback => {\n        var result;\n        transactions++;\n        try {\n          result = callback();\n        } finally {\n          transactions--;\n          if (!transactions) {\n            flush();\n          }\n        }\n        return result;\n      },\n      batchCalls: callback => {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          schedule(() => {\n            callback(...args);\n          });\n        };\n      },\n      schedule,\n      setNotifyFunction: fn => {\n        notifyFn = fn;\n      },\n      setBatchNotifyFunction: fn => {\n        batchNotifyFn = fn;\n      },\n      setScheduler: fn => {\n        scheduleFn = fn;\n      }\n    };\n  }\n  var notifyManager = createNotifyManager();\n});","lineCount":96,"map":[[7,2,81,0,"Object"],[7,8,81,0],[7,9,81,0,"defineProperty"],[7,23,81,0],[7,24,81,0,"exports"],[7,31,81,0],[8,4,81,0,"enumerable"],[8,14,81,0],[9,4,81,0,"get"],[9,7,81,0],[9,18,81,0,"get"],[9,19,81,0],[10,6,81,0],[10,13,82,2,"createNotifyManager"],[10,32,82,21],[11,4,82,21],[12,2,82,21],[13,2,81,0,"Object"],[13,8,81,0],[13,9,81,0,"defineProperty"],[13,23,81,0],[13,24,81,0,"exports"],[13,31,81,0],[14,4,81,0,"enumerable"],[14,14,81,0],[15,4,81,0,"get"],[15,7,81,0],[15,18,81,0,"get"],[15,19,81,0],[16,6,81,0],[16,13,83,2,"defaultScheduler"],[16,29,83,18],[17,4,83,18],[18,2,83,18],[19,2,81,0,"Object"],[19,8,81,0],[19,9,81,0,"defineProperty"],[19,23,81,0],[19,24,81,0,"exports"],[19,31,81,0],[20,4,81,0,"enumerable"],[20,14,81,0],[21,4,81,0,"get"],[21,7,81,0],[21,18,81,0,"get"],[21,19,81,0],[22,6,81,0],[22,13,84,2,"notifyManager"],[22,26,84,15],[23,4,84,15],[24,2,84,15],[25,2,2,0],[25,6,2,0,"_timeoutManagerJs"],[25,23,2,0],[25,26,2,0,"require"],[25,33,2,0],[25,34,2,0,"_dependencyMap"],[25,48,2,0],[26,2,3,0],[26,6,3,4,"defaultScheduler"],[26,22,3,20],[26,25,3,23,"systemSetTimeoutZero"],[26,42,3,43],[26,43,3,43,"systemSetTimeoutZero"],[26,63,3,43],[27,2,4,0],[27,11,4,9,"createNotifyManager"],[27,30,4,28,"createNotifyManager"],[27,31,4,28],[27,33,4,31],[28,4,5,2],[28,8,5,6,"queue"],[28,13,5,11],[28,16,5,14],[28,18,5,16],[29,4,6,2],[29,8,6,6,"transactions"],[29,20,6,18],[29,23,6,21],[29,24,6,22],[30,4,7,2],[30,8,7,6,"notifyFn"],[30,16,7,14],[30,19,7,18,"callback"],[30,27,7,26],[30,31,7,31],[31,6,8,4,"callback"],[31,14,8,12],[31,15,8,13],[31,16,8,14],[32,4,9,2],[32,5,9,3],[33,4,10,2],[33,8,10,6,"batchNotifyFn"],[33,21,10,19],[33,24,10,23,"callback"],[33,32,10,31],[33,36,10,36],[34,6,11,4,"callback"],[34,14,11,12],[34,15,11,13],[34,16,11,14],[35,4,12,2],[35,5,12,3],[36,4,13,2],[36,8,13,6,"scheduleFn"],[36,18,13,16],[36,21,13,19,"defaultScheduler"],[36,37,13,35],[37,4,14,2],[37,8,14,8,"schedule"],[37,16,14,16],[37,19,14,20,"callback"],[37,27,14,28],[37,31,14,33],[38,6,15,4],[38,10,15,8,"transactions"],[38,22,15,20],[38,24,15,22],[39,8,16,6,"queue"],[39,13,16,11],[39,14,16,12,"push"],[39,18,16,16],[39,19,16,17,"callback"],[39,27,16,25],[39,28,16,26],[40,6,17,4],[40,7,17,5],[40,13,17,11],[41,8,18,6,"scheduleFn"],[41,18,18,16],[41,19,18,17],[41,25,18,23],[42,10,19,8,"notifyFn"],[42,18,19,16],[42,19,19,17,"callback"],[42,27,19,25],[42,28,19,26],[43,8,20,6],[43,9,20,7],[43,10,20,8],[44,6,21,4],[45,4,22,2],[45,5,22,3],[46,4,23,2],[46,8,23,8,"flush"],[46,13,23,13],[46,16,23,16,"flush"],[46,17,23,16],[46,22,23,22],[47,6,24,4],[47,10,24,10,"originalQueue"],[47,23,24,23],[47,26,24,26,"queue"],[47,31,24,31],[48,6,25,4,"queue"],[48,11,25,9],[48,14,25,12],[48,16,25,14],[49,6,26,4],[49,10,26,8,"originalQueue"],[49,23,26,21],[49,24,26,22,"length"],[49,30,26,28],[49,32,26,30],[50,8,27,6,"scheduleFn"],[50,18,27,16],[50,19,27,17],[50,25,27,23],[51,10,28,8,"batchNotifyFn"],[51,23,28,21],[51,24,28,22],[51,30,28,28],[52,12,29,10,"originalQueue"],[52,25,29,23],[52,26,29,24,"forEach"],[52,33,29,31],[52,34,29,33,"callback"],[52,42,29,41],[52,46,29,46],[53,14,30,12,"notifyFn"],[53,22,30,20],[53,23,30,21,"callback"],[53,31,30,29],[53,32,30,30],[54,12,31,10],[54,13,31,11],[54,14,31,12],[55,10,32,8],[55,11,32,9],[55,12,32,10],[56,8,33,6],[56,9,33,7],[56,10,33,8],[57,6,34,4],[58,4,35,2],[58,5,35,3],[59,4,36,2],[59,11,36,9],[60,6,37,4,"batch"],[60,11,37,9],[60,13,37,12,"callback"],[60,21,37,20],[60,25,37,25],[61,8,38,6],[61,12,38,10,"result"],[61,18,38,16],[62,8,39,6,"transactions"],[62,20,39,18],[62,22,39,20],[63,8,40,6],[63,12,40,10],[64,10,41,8,"result"],[64,16,41,14],[64,19,41,17,"callback"],[64,27,41,25],[64,28,41,26],[64,29,41,27],[65,8,42,6],[65,9,42,7],[65,18,42,16],[66,10,43,8,"transactions"],[66,22,43,20],[66,24,43,22],[67,10,44,8],[67,14,44,12],[67,15,44,13,"transactions"],[67,27,44,25],[67,29,44,27],[68,12,45,10,"flush"],[68,17,45,15],[68,18,45,16],[68,19,45,17],[69,10,46,8],[70,8,47,6],[71,8,48,6],[71,15,48,13,"result"],[71,21,48,19],[72,6,49,4],[72,7,49,5],[73,6,53,4,"batchCalls"],[73,16,53,14],[73,18,53,17,"callback"],[73,26,53,25],[73,30,53,30],[74,8,54,6],[74,15,54,13],[74,27,54,26],[75,10,54,26],[75,19,54,26,"_len"],[75,23,54,26],[75,26,54,26,"arguments"],[75,35,54,26],[75,36,54,26,"length"],[75,42,54,26],[75,44,54,17,"args"],[75,48,54,21],[75,55,54,21,"Array"],[75,60,54,21],[75,61,54,21,"_len"],[75,65,54,21],[75,68,54,21,"_key"],[75,72,54,21],[75,78,54,21,"_key"],[75,82,54,21],[75,85,54,21,"_len"],[75,89,54,21],[75,91,54,21,"_key"],[75,95,54,21],[76,12,54,17,"args"],[76,16,54,21],[76,17,54,21,"_key"],[76,21,54,21],[76,25,54,21,"arguments"],[76,34,54,21],[76,35,54,21,"_key"],[76,39,54,21],[77,10,54,21],[78,10,55,8,"schedule"],[78,18,55,16],[78,19,55,17],[78,25,55,23],[79,12,56,10,"callback"],[79,20,56,18],[79,21,56,19],[79,24,56,22,"args"],[79,28,56,26],[79,29,56,27],[80,10,57,8],[80,11,57,9],[80,12,57,10],[81,8,58,6],[81,9,58,7],[82,6,59,4],[82,7,59,5],[83,6,60,4,"schedule"],[83,14,60,12],[84,6,65,4,"setNotifyFunction"],[84,23,65,21],[84,25,65,24,"fn"],[84,27,65,26],[84,31,65,31],[85,8,66,6,"notifyFn"],[85,16,66,14],[85,19,66,17,"fn"],[85,21,66,19],[86,6,67,4],[86,7,67,5],[87,6,72,4,"setBatchNotifyFunction"],[87,28,72,26],[87,30,72,29,"fn"],[87,32,72,31],[87,36,72,36],[88,8,73,6,"batchNotifyFn"],[88,21,73,19],[88,24,73,22,"fn"],[88,26,73,24],[89,6,74,4],[89,7,74,5],[90,6,75,4,"setScheduler"],[90,18,75,16],[90,20,75,19,"fn"],[90,22,75,21],[90,26,75,26],[91,8,76,6,"scheduleFn"],[91,18,76,16],[91,21,76,19,"fn"],[91,23,76,21],[92,6,77,4],[93,4,78,2],[93,5,78,3],[94,2,79,0],[95,2,80,0],[95,6,80,4,"notifyManager"],[95,19,80,17],[95,22,80,20,"createNotifyManager"],[95,41,80,39],[95,42,80,40],[95,43,80,41],[96,0,80,42],[96,3]],"functionMap":{"names":["<global>","createNotifyManager","notifyFn","batchNotifyFn","schedule","scheduleFn$argument_0","flush","batchNotifyFn$argument_0","originalQueue.forEach$argument_0","batch","batchCalls","<anonymous>","schedule$argument_0","setNotifyFunction","setBatchNotifyFunction","setScheduler"],"mappings":"AAA;ACG;iBCG;GDE;sBEC;GFE;mBGE;iBCI;ODE;GHE;gBKC;iBDI;sBEC;gCCC;WDE;SFC;OCC;GLE;WQE;KRY;gBSI;aCC;iBCC;SDE;ODC;KTC;uBYM;KZE;4BaK;KbE;kBcC;KdE;CDE"},"hasCjsExports":false},"type":"js/module"}]}