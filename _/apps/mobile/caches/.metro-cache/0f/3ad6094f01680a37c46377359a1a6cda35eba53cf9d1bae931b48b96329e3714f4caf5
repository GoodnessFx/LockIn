{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0},"end":{"line":3,"column":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0},"end":{"line":4,"column":73}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"],"imports":1}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0},"end":{"line":5,"column":69}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"shouldPreventRemove\", {\n    enumerable: true,\n    get: function () {\n      return shouldPreventRemove;\n    }\n  });\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _NavigationBuilderContextJs = require(_dependencyMap[1], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContextJs = require(_dependencyMap[2], \"./NavigationRouteContext.js\");\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) => {\n    var nextRouteKeys = nextRoutes.map(route => route.key);\n    var removedRoutes = currentRoutes.filter(route => !nextRouteKeys.includes(route.key)).reverse();\n    var visitedRouteKeys = action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        continue;\n      }\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContextJs.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContextJs.NavigationRouteContext);\n    var routeKey = route?.key;\n    React.useEffect(() => {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, action => {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13],[11,10,1,13,"d"],[11,11,1,13],[11,14,1,13,"Object"],[11,20,1,13],[11,21,1,13,"getOwnPropertyDescriptor"],[11,45,1,13],[11,46,1,13,"e"],[11,47,1,13],[11,49,1,13,"k"],[11,50,1,13],[12,6,1,13,"Object"],[12,12,1,13],[12,13,1,13,"defineProperty"],[12,27,1,13],[12,28,1,13,"n"],[12,29,1,13],[12,31,1,13,"k"],[12,32,1,13],[12,34,1,13,"d"],[12,35,1,13],[12,36,1,13,"get"],[12,39,1,13],[12,42,1,13,"d"],[12,43,1,13],[13,8,1,13,"enumerable"],[13,18,1,13],[14,8,1,13,"get"],[14,11,1,13],[14,22,1,13,"get"],[14,23,1,13],[15,10,1,13],[15,17,1,13,"e"],[15,18,1,13],[15,19,1,13,"k"],[15,20,1,13],[16,8,1,13],[17,6,1,13],[18,4,1,13],[19,4,1,13,"n"],[19,5,1,13],[19,6,1,13,"default"],[19,13,1,13],[19,16,1,13,"e"],[19,17,1,13],[20,4,1,13],[20,11,1,13,"n"],[20,12,1,13],[21,2,1,13],[22,2,7,0,"Object"],[22,8,7,0],[22,9,7,0,"defineProperty"],[22,23,7,0],[22,24,7,0,"exports"],[22,31,7,0],[23,4,7,0,"enumerable"],[23,14,7,0],[24,4,7,0,"get"],[24,7,7,0],[24,18,7,0,"get"],[24,19,7,0],[25,6,7,0],[25,13,7,0,"shouldPreventRemove"],[25,32,7,0],[26,4,7,0],[27,2,7,0],[28,2,45,0,"exports"],[28,9,45,0],[28,10,45,0,"useOnPreventRemove"],[28,28,45,0],[28,31,45,0,"useOnPreventRemove"],[28,49,45,0],[29,2,3,0],[29,6,3,0,"_react"],[29,12,3,0],[29,15,3,0,"require"],[29,22,3,0],[29,23,3,0,"_dependencyMap"],[29,37,3,0],[30,2,3,0],[30,6,3,0,"React"],[30,11,3,0],[30,14,3,0,"_interopNamespace"],[30,31,3,0],[30,32,3,0,"_react"],[30,38,3,0],[31,2,4,0],[31,6,4,0,"_NavigationBuilderContextJs"],[31,33,4,0],[31,36,4,0,"require"],[31,43,4,0],[31,44,4,0,"_dependencyMap"],[31,58,4,0],[32,2,5,0],[32,6,5,0,"_NavigationRouteContextJs"],[32,31,5,0],[32,34,5,0,"require"],[32,41,5,0],[32,42,5,0,"_dependencyMap"],[32,56,5,0],[33,2,6,0],[33,6,6,6,"VISITED_ROUTE_KEYS"],[33,24,6,24],[33,27,6,27,"Symbol"],[33,33,6,33],[33,34,6,34],[33,54,6,54],[33,55,6,55],[34,2,7,7],[34,6,7,13,"shouldPreventRemove"],[34,25,7,32],[34,28,7,35,"shouldPreventRemove"],[34,29,7,36,"emitter"],[34,36,7,43],[34,38,7,45,"beforeRemoveListeners"],[34,59,7,66],[34,61,7,68,"currentRoutes"],[34,74,7,81],[34,76,7,83,"nextRoutes"],[34,86,7,93],[34,88,7,95,"action"],[34,94,7,101],[34,99,7,106],[35,4,8,2],[35,8,8,8,"nextRouteKeys"],[35,21,8,21],[35,24,8,24,"nextRoutes"],[35,34,8,34],[35,35,8,35,"map"],[35,38,8,38],[35,39,8,39,"route"],[35,44,8,44],[35,48,8,48,"route"],[35,53,8,53],[35,54,8,54,"key"],[35,57,8,57],[35,58,8,58],[36,4,11,2],[36,8,11,8,"removedRoutes"],[36,21,11,21],[36,24,11,24,"currentRoutes"],[36,37,11,37],[36,38,11,38,"filter"],[36,44,11,44],[36,45,11,45,"route"],[36,50,11,50],[36,54,11,54],[36,55,11,55,"nextRouteKeys"],[36,68,11,68],[36,69,11,69,"includes"],[36,77,11,77],[36,78,11,78,"route"],[36,83,11,83],[36,84,11,84,"key"],[36,87,11,87],[36,88,11,88],[36,89,11,89],[36,90,11,90,"reverse"],[36,97,11,97],[36,98,11,98],[36,99,11,99],[37,4,12,2],[37,8,12,8,"visitedRouteKeys"],[37,24,12,24],[37,27,14,2,"action"],[37,33,14,8],[37,34,14,9,"VISITED_ROUTE_KEYS"],[37,52,14,27],[37,53,14,28],[37,57,14,32],[37,61,14,36,"Set"],[37,64,14,39],[37,65,14,40],[37,66,14,41],[38,4,15,2],[38,8,15,8,"beforeRemoveAction"],[38,26,15,26],[38,29,15,29],[39,6,16,4],[39,9,16,7,"action"],[39,15,16,13],[40,6,17,4],[40,7,17,5,"VISITED_ROUTE_KEYS"],[40,25,17,23],[40,28,17,26,"visitedRouteKeys"],[41,4,18,2],[41,5,18,3],[42,4,19,2],[42,9,19,7],[42,13,19,13,"route"],[42,18,19,18],[42,22,19,22,"removedRoutes"],[42,35,19,35],[42,37,19,37],[43,6,20,4],[43,10,20,8,"visitedRouteKeys"],[43,26,20,24],[43,27,20,25,"has"],[43,30,20,28],[43,31,20,29,"route"],[43,36,20,34],[43,37,20,35,"key"],[43,40,20,38],[43,41,20,39],[43,43,20,41],[44,8,22,6],[45,6,23,4],[46,6,26,4],[46,10,26,10,"isPrevented"],[46,21,26,21],[46,24,26,24,"beforeRemoveListeners"],[46,45,26,45],[46,46,26,46,"route"],[46,51,26,51],[46,52,26,52,"key"],[46,55,26,55],[46,56,26,56],[46,59,26,59,"beforeRemoveAction"],[46,77,26,77],[46,78,26,78],[47,6,27,4],[47,10,27,8,"isPrevented"],[47,21,27,19],[47,23,27,21],[48,8,28,6],[48,15,28,13],[48,19,28,17],[49,6,29,4],[50,6,30,4,"visitedRouteKeys"],[50,22,30,20],[50,23,30,21,"add"],[50,26,30,24],[50,27,30,25,"route"],[50,32,30,30],[50,33,30,31,"key"],[50,36,30,34],[50,37,30,35],[51,6,31,4],[51,10,31,10,"event"],[51,15,31,15],[51,18,31,18,"emitter"],[51,25,31,25],[51,26,31,26,"emit"],[51,30,31,30],[51,31,31,31],[52,8,32,6,"type"],[52,12,32,10],[52,14,32,12],[52,28,32,26],[53,8,33,6,"target"],[53,14,33,12],[53,16,33,14,"route"],[53,21,33,19],[53,22,33,20,"key"],[53,25,33,23],[54,8,34,6,"data"],[54,12,34,10],[54,14,34,12],[55,10,35,8,"action"],[55,16,35,14],[55,18,35,16,"beforeRemoveAction"],[56,8,36,6],[56,9,36,7],[57,8,37,6,"canPreventDefault"],[57,25,37,23],[57,27,37,25],[58,6,38,4],[58,7,38,5],[58,8,38,6],[59,6,39,4],[59,10,39,8,"event"],[59,15,39,13],[59,16,39,14,"defaultPrevented"],[59,32,39,30],[59,34,39,32],[60,8,40,6],[60,15,40,13],[60,19,40,17],[61,6,41,4],[62,4,42,2],[63,4,43,2],[63,11,43,9],[63,16,43,14],[64,2,44,0],[64,3,44,1],[65,2,45,7],[65,11,45,16,"useOnPreventRemove"],[65,29,45,34,"useOnPreventRemove"],[65,30,45,34,"_ref"],[65,34,45,34],[65,36,49,3],[66,4,49,3],[66,8,46,2,"getState"],[66,16,46,10],[66,19,46,10,"_ref"],[66,23,46,10],[66,24,46,2,"getState"],[66,32,46,10],[67,6,47,2,"emitter"],[67,13,47,9],[67,16,47,9,"_ref"],[67,20,47,9],[67,21,47,2,"emitter"],[67,28,47,9],[68,6,48,2,"beforeRemoveListeners"],[68,27,48,23],[68,30,48,23,"_ref"],[68,34,48,23],[68,35,48,2,"beforeRemoveListeners"],[68,56,48,23],[69,4,50,2],[69,8,50,2,"_React$useContext"],[69,25,50,2],[69,28,52,6,"React"],[69,33,52,11],[69,34,52,12,"useContext"],[69,44,52,22],[69,45,52,23,"NavigationBuilderContext"],[69,72,52,47],[69,73,52,47,"NavigationBuilderContext"],[69,97,52,47],[69,98,52,48],[70,6,51,4,"addKeyedListener"],[70,22,51,20],[70,25,51,20,"_React$useContext"],[70,42,51,20],[70,43,51,4,"addKeyedListener"],[70,59,51,20],[71,4,53,2],[71,8,53,8,"route"],[71,13,53,13],[71,16,53,16,"React"],[71,21,53,21],[71,22,53,22,"useContext"],[71,32,53,32],[71,33,53,33,"NavigationRouteContext"],[71,58,53,55],[71,59,53,55,"NavigationRouteContext"],[71,81,53,55],[71,82,53,56],[72,4,54,2],[72,8,54,8,"routeKey"],[72,16,54,16],[72,19,54,19,"route"],[72,24,54,24],[72,26,54,26,"key"],[72,29,54,29],[73,4,55,2,"React"],[73,9,55,7],[73,10,55,8,"useEffect"],[73,19,55,17],[73,20,55,18],[73,26,55,24],[74,6,56,4],[74,10,56,8,"routeKey"],[74,18,56,16],[74,20,56,18],[75,8,57,6],[75,15,57,13,"addKeyedListener"],[75,31,57,29],[75,34,57,32],[75,48,57,46],[75,50,57,48,"routeKey"],[75,58,57,56],[75,60,57,58,"action"],[75,66,57,64],[75,70,57,68],[76,10,58,8],[76,14,58,14,"state"],[76,19,58,19],[76,22,58,22,"getState"],[76,30,58,30],[76,31,58,31],[76,32,58,32],[77,10,59,8],[77,17,59,15,"shouldPreventRemove"],[77,36,59,34],[77,37,59,35,"emitter"],[77,44,59,42],[77,46,59,44,"beforeRemoveListeners"],[77,67,59,65],[77,69,59,67,"state"],[77,74,59,72],[77,75,59,73,"routes"],[77,81,59,79],[77,83,59,81],[77,85,59,83],[77,87,59,85,"action"],[77,93,59,91],[77,94,59,92],[78,8,60,6],[78,9,60,7],[78,10,60,8],[79,6,61,4],[80,4,62,2],[80,5,62,3],[80,7,62,5],[80,8,62,6,"addKeyedListener"],[80,24,62,22],[80,26,62,24,"beforeRemoveListeners"],[80,47,62,45],[80,49,62,47,"emitter"],[80,56,62,54],[80,58,62,56,"getState"],[80,66,62,64],[80,68,62,66,"routeKey"],[80,76,62,74],[80,77,62,75],[80,78,62,76],[81,2,63,0],[82,0,63,1],[82,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"},"hasCjsExports":false},"type":"js/module"}]}